/*!
 * data-streamer
 * @author Anthony Fassett
 * @version 1.0.0
 * Copyright 2015.
 */
!function(a){"use strict";function b(){a.json(e.attr("data-href"),function(b,e){if(b)return console.warn(b);var f=e,g=Math.min(c,d)/2,h=20,i=18,j=4,k=a.scale.category10(),l=a.select("[pie-chart]").append("svg").attr("width",c).attr("height",d).append("g").attr("transform","translate("+c/2+","+d/2+")"),m=a.svg.arc().innerRadius(g-h).outerRadius(g),n=a.layout.pie().value(function(a){return a.value}).sort(null),o=a.select("[pie-chart]").append("div").attr("class","chart-tooltip");o.append("div").attr("class","chart-label"),o.append("div").attr("class","count"),o.append("div").attr("class","percent");var p=l.selectAll("path").data(n(f)).enter().append("path").attr("d",m).attr("fill",function(a,b){return k(a.data.name)});p.on("mouseover",function(b){a.sum(f.map(function(a){return a.value}));o.select(".chart-label").html(b.data.name),o.select(".count").html(b.data.value+"%"),o.style("display","block")}),p.on("mouseout",function(){o.style("display","none")});var q=l.selectAll(".legend").data(k.domain()).enter().append("g").attr("class","legend").attr("transform",function(a,b){var c=i+j,d=c*k.domain().length/2,e=-2*i,f=b*c-d;return"translate("+e+","+f+")"});q.append("rect").attr("width",i).attr("height",i).style("fill",k).style("stroke",k),q.append("text").attr("x",i+j).attr("y",i-j).text(function(a){return a})})}var c=210,d=210,e=a.selectAll("[pie-chart]");b()}(window.d3);